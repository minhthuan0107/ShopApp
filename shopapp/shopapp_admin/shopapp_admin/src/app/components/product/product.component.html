<div class="container-fluid product-table-container">
  <!-- Ti√™u ƒë·ªÅ -->
  <div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800 title-shift-up">üì¶ Danh s√°ch s·∫£n ph·∫©m</h1>
  </div>

  <!-- T√¨m ki·∫øm -->
  <div class="search-wrapper mb-3">
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>T√¨m ki·∫øm s·∫£n ph·∫©m</mat-label>
      <input matInput [(ngModel)]="keyword" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m, m√¥ t·∫£..." (keyup)="applyFilter()">
      <button mat-icon-button matSuffix disabled>
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>
  </div>

  <!-- B·∫£ng d·ªØ li·ªáu -->
  <div class="table-wrapper">
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8 custom-table">
      <!-- ID -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
        <td mat-cell *matCellDef="let row">{{ row.id }}</td>
      </ng-container>
      <!-- T√™n s·∫£n ph·∫©m -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>T√™n s·∫£n ph·∫©m</th>
        <td mat-cell *matCellDef="let row">{{ row.name }}</td>
      </ng-container>
      <!-- H√¨nh ·∫£nh -->
      <ng-container matColumnDef="url_image">
        <th mat-header-cell *matHeaderCellDef class="image-cell">H√¨nh ·∫£nh</th>
        <td mat-cell *matCellDef="let row">
          <img [src]="row.url_image" alt="H√¨nh ·∫£nh s·∫£n ph·∫©m" width="90" height="90"
            style="object-fit: cover; border-radius: 4px;">
        </td>
      </ng-container>
      <!-- Gi√° -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Gi√°</th>
        <td mat-cell *matCellDef="let row">{{ row.price | number:'1.0-0' }}‚Ç´</td>
      </ng-container>

      <!-- Danh m·ª•c -->
      <ng-container matColumnDef="category">
        <th mat-header-cell *matHeaderCellDef>Danh m·ª•c</th>
        <td mat-cell *matCellDef="let row">{{ row.category?.name }}</td>
      </ng-container>

      <!-- Th∆∞∆°ng hi·ªáu -->
      <ng-container matColumnDef="brand">
        <th mat-header-cell *matHeaderCellDef>Th∆∞∆°ng hi·ªáu</th>
        <td mat-cell *matCellDef="let row">{{ row.brand?.name }}</td>
      </ng-container>

      <!-- M√¥ t·∫£ -->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef>M√¥ t·∫£</th>
        <td mat-cell *matCellDef="let row">
          <span class="description-cell" [matTooltip]="row.description">
            {{ row.description }}
          </span>
        </td>
      </ng-container>

      <!-- S·ªë l∆∞·ª£ng -->
      <ng-container matColumnDef="quantity">
        <th mat-header-cell *matHeaderCellDef>S·ªë l∆∞·ª£ng</th>
        <td mat-cell *matCellDef="let row" class="text-right-8">{{ row.quantity }}</td>
      </ng-container>

      <!-- ƒê√£ b√°n -->
      <ng-container matColumnDef="sold">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>ƒê√£ b√°n</th>
        <td mat-cell *matCellDef="let row" class="text-right-8">{{ row.sold }}</td>
      </ng-container>

      <!-- Tr·∫°ng th√°i -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Tr·∫°ng th√°i</th>
        <td mat-cell *matCellDef="let row">
          <span [ngClass]="row.status ? 'text-success' : 'text-danger'">
            {{ row.status ? 'C√≤n h√†ng' : 'H·∫øt h√†ng' }}
          </span>
        </td>
      </ng-container>

      <!-- H√†nh ƒë·ªông -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>H√†nh ƒë·ªông</th>
        <td mat-cell *matCellDef="let row">
          <!-- S·ª≠a -->
          <button mat-icon-button color="accent" (click)="editProduct(row)" matTooltip="Ch·ªânh s·ª≠a">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Header & Row Definitions -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <!-- Ph√¢n trang -->
    <mat-paginator [length]="totalItems" [pageSize]="4" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
      (page)="onPageChange($event)">
    </mat-paginator>
  </div>

  <!-- Kh√¥ng t√¨m th·∫•y -->
  <div *ngIf="dataSource.data.length === 0" class="no-records-message mt-4 text-center">
    ‚ùå Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o ph√π h·ª£p v·ªõi t·ª´ kh√≥a "<strong>{{ keyword }}</strong>"
  </div>
</div>